<svrunit setupTime="13">

    <testsuites>

        <testsuite name="Default Checks" group="core" dockerImage="dockware/shopware-essentials:{{tag}}">
            <directory>../tests/defaults</directory>
            <directory>../tests/node/v22</directory>
            <directory>../tests/php/php8.3</directory>
            <directory>../tests/tools/composer/v2</directory>
            <directory>../tests/tools/bun</directory>
            <directory>../tests/features/xdebug-off</directory>
        </testsuite>

        <!-- FEATURES -->

        <testsuite name="Recovery Mode works" group="features" dockerImage="dockware/shopware-essentials:{{tag}}" dockerEnv="RECOVERY_MODE=1">
            <directory>../tests/features/recovery-mode</directory>
        </testsuite>

        <testsuite name="Custom SSH User" group="features" dockerImage="dockware/shopware-essentials:{{tag}}" dockerEnv="SSH_USER=foo,SSH_PWD=bar">
            <directory>../tests/features/custom-ssh</directory>
        </testsuite>

        <testsuite name="Filebeat ON" group="features" dockerImage="dockware/shopware-essentials:{{tag}}" dockerEnv="FILEBEAT_ENABLED=1">
            <directory>../tests/features/filebeat-on</directory>
        </testsuite>

        <testsuite name="Supervisor ON" group="features" dockerImage="dockware/shopware-essentials:{{tag}}" dockerEnv="SUPERVISOR_ENABLED=1">
            <directory>../tests/features/supervisor-on</directory>
        </testsuite>

        <testsuite name="Tideways ON" group="features" dockerImage="dockware/shopware-essentials:{{tag}}" dockerEnv="TIDEWAYS_KEY=abc">
            <directory>../tests/features/tideways-on</directory>
        </testsuite>

        <testsuite name="Timezone can be set" group="features" dockerImage="dockware/shopware-essentials:{{tag}}" dockerEnv="TZ=Asia/Tokyo">
            <directory>../tests/features/timezone</directory>
        </testsuite>

        <testsuite name="XDebug OFF" group="features" dockerImage="dockware/shopware-essentials:{{tag}}" dockerEnv="XDEBUG_ENABLED=0">
            <directory>../tests/features/xdebug-off</directory>
        </testsuite>

        <testsuite name="Command Runner" group="features" dockerImage="dockware/shopware-essentials:{{tag}}" dockerCommandRunner="true">
            <directory>../tests/features/command-runner</directory>
        </testsuite>

        <!-- NODE -->

        <testsuite name="ENV - Node Version Switch to 22" group="node" dockerImage="dockware/shopware-essentials:{{tag}}" dockerEnv="NODE_VERSION=22">
            <directory>../tests/node/v22</directory>
        </testsuite>

        <testsuite name="ENV - Node Version Switch to 20" group="node" dockerImage="dockware/shopware-essentials:{{tag}}" dockerEnv="NODE_VERSION=20">
            <directory>../tests/node/v20</directory>
        </testsuite>

        <!-- PHP -->

        <testsuite name="PHP 8.3, XDebug ON" group="php" dockerImage="dockware/shopware-essentials:{{tag}}" dockerEnv="PHP_VERSION=8.3,XDEBUG_ENABLED=1">
            <directory>../tests/php/php8.3</directory>
            <directory>../tests/tools/xdebug/xdebug3</directory>
            <directory>../tests/tools/composer/v2</directory>
            <directory>../tests/tools/tideways/config</directory>
            <directory>../tests/features/xdebug-on</directory>
        </testsuite>

        <testsuite name="PHP 8.2, XDebug ON" group="php" dockerImage="dockware/shopware-essentials:{{tag}}" dockerEnv="PHP_VERSION=8.2,XDEBUG_ENABLED=1">
            <directory>../tests/php/php8.2</directory>
            <directory>../tests/tools/xdebug/xdebug3</directory>
            <directory>../tests/tools/composer/v2</directory>
            <directory>../tests/tools/tideways/config</directory>
            <directory>../tests/features/xdebug-on</directory>
        </testsuite>

        <testsuite name="Restart PHP" group="php" dockerImage="dockware/shopware-essentials:{{tag}}">
            <directory>../tests/features/restart-php</directory>
        </testsuite>

        <testsuite name="Switch PHP Version" group="php" dockerImage="dockware/shopware-essentials:{{tag}}">
            <directory>../tests/features/switch-php</directory>
        </testsuite>

    </testsuites>

</svrunit>